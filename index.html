<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Carte hover Macadam</title>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    #map { width: 100%; height: 400px; }
    .mapboxgl-popup-content { 
      background: #66bb6a; 
      color: #fff; 
      padding: 4px 8px; 
      border-radius: 4px; 
      font-size: 14px;
    }
  </style>
</head>
<body>

<div id="map"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYmliOTIiLCJhIjoiY20wa3l3MHd2MDAxczJtcW9hYWJpNWIydCJ9.J8eQHzCZDNziSXLw5LricQ'; // remplace par ta vraie clé

const map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/bib92/cmkdvxm0r002801s30u3c1rt7', // remplace par ton style Mapbox
  center: [6.6323, 46.5197],
  zoom: 11,
  minZoom: 10,
  maxZoom: 14
});

map.dragRotate.disable();
map.touchZoomRotate.disableRotation();

// ton polygone GeoJSON exemple
const zonesGeoJSON = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": { "name": "Zone tarif réduit" },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [6.630, 46.520],
            [6.640, 46.520],
            [6.640, 46.530],
            [6.630, 46.530],
            [6.630, 46.520]
          ]
        ]
      }
    }
  ]
};

// ajouter la couche
map.on('load', () => {
  map.addSource('zones', { type: 'geojson', data: zonesGeoJSON });

  map.addLayer({
    id: 'zones-tarif',
    type: 'fill',
    source: 'zones',
    layout: {},
    paint: {
      'fill-color': '#66bb6a',
      'fill-opacity': 0.5
    }
  });

  // hover
  let popup;
  map.on('mouseenter', 'zones-tarif', (e) => {
    map.getCanvas().style.cursor = 'pointer';
    if (popup) popup.remove();
    popup = new mapboxgl.Popup({ closeButton: false, closeOnClick: false })
      .setLngLat(e.lngLat)
      .setHTML('Zone à tarif réduit')
      .addTo(map);
  });

  map.on('mouseleave', 'zones-tarif', () => {
    map.getCanvas().style.cursor = '';
    if (popup) popup.remove();
  });
});
</script>

</body>
</html>
